# ğŸ“˜ api-module
GCP Terraform enable api module repo

ì´ ëª¨ë“ˆì€ Google Cloud API í™œì„±í™”ë¥¼ ìœ„í•œ ëª¨ë“ˆì…ë‹ˆë‹¤. <br>
Google Cloud í”„ë¡œì íŠ¸ì—ì„œ ì—¬ëŸ¬ APIë¥¼ í•œ ë²ˆì— í™œì„±í™”í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

<br>

## ğŸ“‘ **ëª©ì°¨**
1. [ëª¨ë“ˆ íŠ¹ì§•](#ëª¨ë“ˆ-íŠ¹ì§•)
2. [ì‚¬ìš© ë°©ë²•](#ì‚¬ìš©-ë°©ë²•)
    1. [ì‚¬ì „ ì¤€ë¹„](#1-ì‚¬ì „-ì¤€ë¹„)
    2. [ì…ë ¥ ë³€ìˆ˜](#2-ì…ë ¥-ë³€ìˆ˜)
    3. [ëª¨ë“ˆ í˜¸ì¶œ ì˜ˆì‹œ](#3-ëª¨ë“ˆ-í˜¸ì¶œ-ì˜ˆì‹œ)
    4. [ì¶œë ¥ê°’ (Outputs)](#4-ì¶œë ¥ê°’-outputs)
    5. [ì§€ì› ë²„ì „](#5-ì§€ì›-ë²„ì „)
    6. [ëª¨ë“ˆ ê°œë°œ ë° ê´€ë¦¬](#6-ëª¨ë“ˆ-ê°œë°œ-ë°-ê´€ë¦¬)
3. [í…ŒìŠ¤íŠ¸](#terratestë¥¼-ì´ìš©í•œ-í…ŒìŠ¤íŠ¸)
4. [ì£¼ìš” ë²„ì „ ê´€ë¦¬](#ì£¼ìš”-ë²„ì „-ê´€ë¦¬)
5. [ê¸°ì—¬](#ê¸°ì—¬-contributing)
6. [ë¼ì´ì„ ìŠ¤](#ë¼ì´ì„ ìŠ¤-license)

---

## ëª¨ë“ˆ íŠ¹ì§•

- Google Cloud í”„ë¡œì íŠ¸ì— ì—¬ëŸ¬ APIë¥¼ í™œì„±í™”.
- `disable_on_destroy` ì˜µì…˜ì„ í†µí•´ API ë¼ì´í”„ì‚¬ì´í´ ê´€ë¦¬.(ê¸°ë³¸ê°’ : false)
- í™œì„±í™”ëœ API ëª©ë¡, ê³ ìœ  ì‹ë³„ì ë° í”„ë¡œì íŠ¸ ì •ë³´ë¥¼ ì¶œë ¥í•˜ì—¬ ì¸í”„ë¼ì—ì„œ í™œìš© ê°€ëŠ¥.

---

## ì‚¬ìš© ë°©ë²•

### 1. ì‚¬ì „ ì¤€ë¹„

ë‹¤ìŒ ì‚¬í•­ í™•ì¸:
1. Google Cloud í”„ë¡œì íŠ¸ ì¤€ë¹„.
2. ì ì ˆí•œ IAM ê¶Œí•œ í•„ìš”: `roles/serviceusage.serviceUsageAdmin` (API í™œì„±í™” ê¶Œí•œ í•„ìˆ˜).

<br>

### 2. ì…ë ¥ ë³€ìˆ˜

| ë³€ìˆ˜ëª…                        | íƒ€ì…         | í•„ìˆ˜ ì—¬ë¶€ | ê¸°ë³¸ê°’  | ì„¤ëª…                                                                 |
|-------------------------------|--------------|-----------|---------|----------------------------------------------------------------------|
| `services`                    | list(string) | âœ…        | ì—†ìŒ    | í™œì„±í™”í•  GCP ì„œë¹„ìŠ¤ ì´ë¦„ ëª©ë¡ (ì˜ˆ: `["compute.googleapis.com"]`)      |
| `project`                     | string       | âŒ        | null    | GCP í”„ë¡œì íŠ¸ ID (ì œê³µë˜ì§€ ì•Šìœ¼ë©´ Provider í”„ë¡œì íŠ¸ ì‚¬ìš©)             |
| `disable_on_destroy`          | bool         | âŒ        | `false` | ë¦¬ì†ŒìŠ¤ ì‚­ì œ ì‹œ ì„œë¹„ìŠ¤ ë¹„í™œì„±í™” ì—¬ë¶€                                   |
| `disable_dependent_services`  | bool         | âŒ        | `false` | ì¢…ì†ëœ ì„œë¹„ìŠ¤ ë¹„í™œì„±í™” ì—¬ë¶€                                           |
| `check_if_service_has_usage_on_destroy` | bool | âŒ        | `false` | ë¦¬ì†ŒìŠ¤ ì‚­ì œ ì‹œ 30ì¼ ë‚´ ì„œë¹„ìŠ¤ ì‚¬ìš© ì—¬ë¶€ í™•ì¸                          |
| `timeout_create`              | string       | âŒ        | `20m`   | ë¦¬ì†ŒìŠ¤ ìƒì„± ì œí•œ ì‹œê°„                                                |
| `timeout_read`                | string       | âŒ        | `10m`   | ë¦¬ì†ŒìŠ¤ ì½ê¸° ì œí•œ ì‹œê°„                                                |
| `timeout_update`              | string       | âŒ        | `20m`   | ë¦¬ì†ŒìŠ¤ ì—…ë°ì´íŠ¸ ì œí•œ ì‹œê°„                                            |
| `timeout_delete`              | string       | âŒ        | `20m`   | ë¦¬ì†ŒìŠ¤ ì‚­ì œ ì œí•œ ì‹œê°„                                                |

---

### 3. ëª¨ë“ˆ í˜¸ì¶œ ì˜ˆì‹œ

```hcl
module "api_enable" {
  source = "git::https://github.com/GCP-Terraform-Module-steamedEggMaster/api-module.git?ref=v1.0.0"

  services = [
    "compute.googleapis.com",
    "storage.googleapis.com"
  ]

  project                     = "your-gcp-project-id"
  disable_on_destroy          = false
  disable_dependent_services  = false
  check_if_service_has_usage_on_destroy = false

  timeout_create = "15m"
  timeout_read   = "5m"
  timeout_update = "15m"
  timeout_delete = "10m"
}
```

---

### 4. ì¶œë ¥ê°’ (Outputs)

| ì¶œë ¥ëª…               | ì„¤ëª…                                                 |
|----------------------|------------------------------------------------------|
| `enabled_api_services` | í™œì„±í™”ëœ GCP API ì„œë¹„ìŠ¤ì˜ ëª©ë¡                      |
| `enabled_api_ids`      | í™œì„±í™”ëœ GCP API ì„œë¹„ìŠ¤ì˜ ê³ ìœ  ì‹ë³„ì ëª©ë¡          |
| `enabled_api_names`    | í™œì„±í™”ëœ GCP API ì„œë¹„ìŠ¤ ì´ë¦„ë“¤                      |
| `project_id`           | í™œì„±í™”ëœ GCP API ì„œë¹„ìŠ¤ê°€ ì†í•œ í”„ë¡œì íŠ¸ ID          |

<br>

### 5. ì§€ì› ë²„ì „

#### a. Terraform ë²„ì „
| ë²„ì „ ë²”ìœ„ | ì„¤ëª…                              |
|-----------|-----------------------------------|
| `>= 1.10.3`| ìµœì†Œ ì§€ì› ë²„ì „                   |

#### b. Google Provider ë²„ì „
| ë²„ì „ ë²”ìœ„ | ì„¤ëª…                              |
|-----------|-----------------------------------|
| `~> 6.0`  | ìµœì†Œ ì§€ì› ë²„ì „                   |

<br>

### 6. ëª¨ë“ˆ ê°œë°œ ë° ê´€ë¦¬

#### **ì €ì¥ì†Œ êµ¬ì¡°**
```
router-module/
  â”œâ”€â”€ .github/workflows/  # github actions ìë™í™” í…ŒìŠ¤íŠ¸
  â”œâ”€â”€ examples/           # í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë£¨íŠ¸ ëª¨ë“ˆ ëª¨ìŒ ë””ë ‰í„°ë¦¬
  â”œâ”€â”€ test/               # í…ŒìŠ¤íŠ¸ êµ¬ì„± ë””ë ‰í„°ë¦¬
  â”œâ”€â”€ main.tf             # ëª¨ë“ˆì˜ í•µì‹¬ êµ¬í˜„
  â”œâ”€â”€ variables.tf        # ì…ë ¥ ë³€ìˆ˜ ì •ì˜
  â”œâ”€â”€ outputs.tf          # ì¶œë ¥ ì •ì˜
  â”œâ”€â”€ README.md           # ë¬¸ì„œí™” íŒŒì¼
```

<br>

---

### Terratestë¥¼ ì´ìš©í•œ í…ŒìŠ¤íŠ¸
ì´ ëª¨ë“ˆì„ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ì œê³µëœ Go ê¸°ë°˜ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”. ì•„ë˜ë¥¼ í™•ì¸í•˜ì„¸ìš”:

1. Terraform ë° Go ì„¤ì¹˜.
2. í•„ìš”í•œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •.
3. í…ŒìŠ¤íŠ¸ ì‹¤í–‰:
```bash
go test -v ./test
```

<br>

## ì£¼ìš” ë²„ì „ ê´€ë¦¬
ì´ ëª¨ë“ˆì€ [Semantic Versioning](https://semver.org/)ì„ ë”°ë¦…ë‹ˆë‹¤.  
ì•ˆì •ëœ ë²„ì „ì„ ì‚¬ìš©í•˜ë ¤ë©´ `?ref=<version>`ì„ í™œìš©í•˜ì„¸ìš”:

```hcl
source = "git::https://github.com/GCP-Terraform-Module-steamedEggMaster/api-module.git?ref=v1.0.0"
```

### Module ref ë²„ì „
| Major | Minor | Patch |
|-----------|-----------|----------|
| `1.0.0`   |    |   |

<br>

## ê¸°ì—¬ (Contributing)
ê¸°ì—¬ë¥¼ í™˜ì˜í•©ë‹ˆë‹¤! ë²„ê·¸ ì œë³´ ë° ê¸°ëŠ¥ ìš”ì²­ì€ GitHub Issuesë¥¼ í†µí•´ ì œì¶œí•´ì£¼ì„¸ìš”.

<br>

## ë¼ì´ì„ ìŠ¤ (License)
[MIT License](LICENSE)